<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Margate Electronics</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="section" id="about"><div class="title">Margate Electronics</div>
  <div class="ascii-box">Margate Electronics is a quarterly event launched in 2023 in Margate, UK. Its musical direction explores the intersection of club and experimental electronic sound. Focusing on hardware and concept-driven performances that push creative sonic boundaries.<br><br>The project is supported using public funding by Arts Council England.</div>
  </div>

  <div class="section" id="event"><div class="title">Next Event - Friday 13 June</div>
  <div class="ascii-box event-box"><div class="event-text">Live:<br><a href="https://plasticinfinite.bandcamp.com" target="_blank">Sculpture</a>, <a href="https://ybulbul.bandcamp.com" target="_blank">Y Bülbül</a>, <a href="https://richardpike.bandcamp.com" target="_blank">Richard Pike</a><br>Date: Friday 13 June<br>Location: Margate Arts Club<br><a href="https://www.outsavvy.com/event/26885/margate-electronics-8" target="_blank" rel="noopener noreferrer">Book Tickets</a>
</div><div class="event-image"><img src="https://raw.githubusercontent.com/tomasjef/margate-electronics/main/ME_8_poster_.jpg" alt="Margate Electronics #8 Poster" class="poster"></div></div>
  </div>

<div class="section" id="newsletter"><div class="title">Buy T-Shirt</div>
  <div class="ascii-box">Limited Edition T-shirt<br>Pre-order now, collect at event or choose shipping<br>
  <button
    class="snipcart-add-item"
    data-item-id="shirt001"
    data-item-name="Limited T-shirt"
    data-item-price="25.00"
    data-item-url="/"
    data-item-description="Pre-order limited shirt"
    data-item-custom1-name="Size"
    data-item-custom1-options="S|M|L|XL"
    data-item-custom2-name="Delivery"
    data-item-custom2-options="Shipping|Collect at Event"
  >
    Order Now
  </button>
  </div>
  
  <div class="section" id="newsletter"><div class="title">Stay in the loop</div>
  <div class="ascii-box"><a href="https://www.subscribepage.io/margate-electronics-news" target="_blank">Sign up for our Newsletter</a><br><a href="https://www.instagram.com/margate.electronics/" target="_blank">Follow on Instagram</a></div>
  </div>

  <div class="section" id="audio">
    <div class="title">Audio Recordings 2023–2025</div>
    <div class="ascii-box" id="audio-container">Loading audio tracks...</div>
  </div>
  <div id="lightbox" class="lightbox" onclick="this.classList.remove('show')">
    <img src="https://raw.githubusercontent.com/tomasjef/margate-electronics/main/ME_8_poster_.jpg" alt="Full-size Poster">
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const lightbox = document.getElementById('lightbox');
      document.querySelectorAll('.poster').forEach(img => {
        const preload = new Image();
        preload.src = img.src;
        preload.loading = "eager";
        img.addEventListener('click', () => {
          lightbox.querySelector('img').src = img.src;
          lightbox.classList.add('show');
        });
      });
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && lightbox.classList.contains('show')) {
          lightbox.classList.remove('show');
        }
      });

      fetch("https://archivalrecs.s3.eu-central-003.backblazeb2.com/tracks.json")
        .then(res => res.json())
        .then(audioData => {
          const container = document.getElementById('audio-container');
          container.innerHTML = '';
          if (!audioData.length) {
            container.innerText = 'No audio tracks found.';
            return;
          }
          audioData.forEach(track => {
            const div = document.createElement('div');
            div.className = 'track-entry';
            div.innerHTML = `
  <div class="track-entry-inner">
    <div class="track-title">${track.title}</div>
    <audio controls controlsList="nodownload noplaybackrate nofullscreen">
      <source src="${track.file}" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>`;
            container.appendChild(div);
          });
        })
        .catch(error => {
          const container = document.getElementById('audio-container');
          container.innerText = '⚠️ Failed to load tracks. Please try again later.';
          console.error('Error loading tracks:', error);
        });
    });
  </script>
<!-- Snipcart stylesheet -->
<link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.6.0/default/snipcart.css" />

<!-- Snipcart script -->
<script async src="https://cdn.snipcart.com/themes/v3.6.0/default/snipcart.js"></script>

<!-- Your API Key -->
<div hidden id="snipcart" data-api-key="MDBmYmUyZGMtYjAzYy00MDJmLWJlM2QtYjE0ZmQ4NTQwZjE4NjM4ODMyODExNDQ0MTExMjI2
"></div>
</body>
</html>
